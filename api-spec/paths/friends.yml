paths:
  /friends/{username}:
    get:
      tags:
        - friends
      summary: Get friends list
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Paginated friends
          content:
            application/json:
              schema:
                $ref: '../openapi.yml#/components/schemas/PaginatedFriends'
      'x-isSecure': false
    post:
      tags:
        - friends
      summary: Send friend request
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                target_username:
                  type: string
              required:
                - target_username
      responses:
        '201':
          description: Friend request sent
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Friend request sent
      'x-isSecure': true
  /friends/{username}/accept/{request_id}:
    post:
      tags:
        - friends
      summary: Accept friend request
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
        - name: request_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Request accepted
      'x-isSecure': true
  /friends/{username}/{friend_username}:
    delete:
      tags:
        - friends
      summary: Remove friend
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
        - name: friend_username
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Friend removed
      'x-isSecure': true
  /friends/{username}/requests/:
    get:
      tags:
        - friends
      summary: Get incoming pending friend requests
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Paginated incoming friend requests
          content:
            application/json:
              schema:
                $ref: '../openapi.yml#/components/schemas/PaginatedFriendshipList'
      'x-isSecure': true
  /friends/{username}/requests/{request_id}/:
    delete:
      tags:
        - friends
      summary: Reject incoming friend request
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
        - name: request_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Friend request rejected
      'x-isSecure': true
  /friends/search/:
    get:
      tags:
        - friends
      summary: Search users by username
      parameters:
        - name: q
          in: query
          schema:
            type: string
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Paginated members
          content:
            application/json:
              schema:
                $ref: '../openapi.yml#/components/schemas/PaginatedMembers'
      'x-isSecure': false
